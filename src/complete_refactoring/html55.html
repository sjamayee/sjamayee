<!DOCTYPE html>
<html>
 <head>
  <meta charset="UTF-8"/>
  <title>html5</title>
  <!--/*Google Chrome Frame*/-->
	<!--[if IE]>
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<script src="http://s12.in/cfinstall.js"></script><![endif]-->
	<!--/*GCF Fallback*/-->
	<!--[if lt IE 9]>
	<script src="http://s12.in/html5/shiv.js"></script><![endif]-->
	<!--[if lt IE 8]>
	<script src="http://s12.in/ie.js"></script><![endif]-->
	<!-- link rel="stylesheet" href="http://s12.in/html5/default.css"/ -->
	<link rel="stylesheet" href="html5_default.css"/>
	
	<!-- link rel="stylesheet" href="styles.css"/ -->
	
	<!-- script src="http://s12.in/jquery/core.js"></script -->
  <script type="text/javascript" src="../../src/externs/js/mootools_1_2_5_core_nc.js"></script>
  <script type="text/javascript" src="../../src/externs/js/mootools_1_2_4_4_more_nc.js"></script>	

  <!-- script type="text/javascript" -->
  <script type="application/javascript">

	//Class: SObject
	var SObject = new Class({
	  initialize: function(i) {
			this.name = "sjamayee";
			this.address = "address";
			this.amount = (i * 152000);
		}
	});

	//Class: SjamayeeDb
	var SjamayeeDb = new Class({
	  initialize: function(name,version,description,size) {
		  var _this = this;
			this.name = name;
			this.version = version;
			this.description = description;
			this.size = size;
	    this.webdb = {};
	    this.webdb.onError = function(tx, e) {
	    //this.webdb.onError = function() {
	      //writeError(e);
 		    log('Something unexpected happened: ' + e.message );
 		    //log('Something unexpected happened.');
	    };
	    this.webdb.onSuccess = function(tx, r) {   
 		    log('ok!');
			  var rowOutput = "";
			  for (var i = 0; i < r.rows.length; i++) {
				  if (i <= 5 || i == 10 || i == 50 || i == 3000 || i == 4000) {
			    	//rowOutput += renderTodo(r.rows.item(i));
					  alert('id: '+r.rows.item(i).id+' value: '+r.rows.item(i).value);
					}
			  }
	    };
			this.open(this.name,this.version,this.description,this.size);
			this.createSchema();
	  },
		createSchema: function() {
		  var _this = this;
			var sqlText = null;
			//Sequences
			sqlText = "create table if not exists `"+SjamayeeDb.SEQUENCES+"`("+
								"`value` integer not null default 0);";
			this.dropTable(SjamayeeDb.SEQUENCES);
			this.executeSql(sqlText);
	    this.webdb.db.transaction(function(tx) {
				var sqlText = "insert into `"+SjamayeeDb.SEQUENCES+"` default values;"
		 		tx.executeSql(sqlText, [], _this.webdb.onSuccess, _this.webdb.onError);
				var sqlText = "select * from `"+SjamayeeDb.SEQUENCES+"`;"
		 		tx.executeSql(sqlText, [], _this.webdb.onSuccess, _this.webdb.onError);
	    });
			//Types
			sqlText = "create table if not exists `"+SjamayeeDb.TYPES+"`("+
								"`id` text primary key not null,"+
								"`version` integer not null default 0,"+
								"`type` text not null,"+
								"`code` text not null,"+
			          "`name` text not null,"+
			          "`description` text default null,"+
			          "`in_use` text not null default 'Y',"+
			          "`object` text default null,"+
			          "`txi` text default null,"+
			          "`cbi` text not null,"+
			          "`cat` text not null default current_timestamp,"+
			          "`mbi` text not null,"+
			          "`mat` text not null default current_timestamp);";
			_this.dropTable(SjamayeeDb.TYPES);
			_this.executeSql(sqlText);
			//Texts
			sqlText = "create table if not exists `"+SjamayeeDb.TEXTS+"`("+
								"`id` text primary key not null,"+
			          "`version` integer not null default 0,"+
			          "`name` text default null,"+
			          "`nid` text default null,"+
			          "`pid` text default null,"+
			          "`par` text not null default '',"+
			          "`seq` real not null default 0,"+
			          "`text` text not null,"+
			          "`cbi` text not null,"+
			          "`cat` text not null default current_timestamp,"+
			          "`mbi` text not null,"+
			          "`mat` text not null default current_timestamp);";			
			_this.dropTable(SjamayeeDb.TEXTS);
			_this.executeSql(sqlText);
			//Objects
			sqlText = "create table if not exists `"+SjamayeeDb.OBJECTS+"`("+
								"`id` text primary key not null,"+
			          "`version` integer not null default 0,"+
			          "`name` text default null,"+
			          "`description` text default null,"+
			          "`tid` text default null,"+
			          "`exi` text default null,"+
			          "`mei` text default null,"+
			          "`oid` text default null,"+
			          "`txi` text default null,"+
			          "`cbi` text not null,"+
			          "`cat` text not null default current_timestamp,"+
			          "`mbi` text not null,"+
			          "`mat` text not null default current_timestamp);";			
			_this.dropTable(SjamayeeDb.OBJECTS);
			_this.executeSql(sqlText);
			//References
			sqlText = "create table if not exists `"+SjamayeeDb.REFERENCES+"`("+
								"`id` text primary key not null,"+
			          "`version` integer not null default 0,"+
			          "`name` text default null,"+
			          "`mri` text default null,"+
			          "`pei` text default null,"+
			          "`cei` text default null,"+
			          "`pid` text default null,"+
			          "`nid` text default null,"+
			          "`txi` text default null,"+
			          "`cbi` text not null,"+
			          "`cat` text not null default current_timestamp,"+
			          "`mbi` text not null,"+
			          "`mat` text not null default current_timestamp);";			
			_this.dropTable(SjamayeeDb.REFERENCES);
			_this.executeSql(sqlText);
			//Attributes
			sqlText = "create table if not exists `"+SjamayeeDb.ATTRIBUTES+"`("+
								"`id` text primary key not null,"+
			          "`version` integer not null default 0,"+
			          "`name` text default null,"+
			          "`value` text default null,"+
			          "`mai` text default null,"+
			          "`eid` text default null,"+
			          "`default_value` text default null,"+
			          "`description` text default null,"+
			          "`digits` integer default null,"+
			          "`format` text default null,"+
			          "`hxi` text default null,"+
			          "`identifier` text default null,"+ //default: N
			          "`label` text default null,"+
			          "`length` integer default null,"+ //default: 0
			          "`mandatory` text default null,"+ //default: N
			          "`nid` text default null,"+
			          "`precision` integer default 0,"+
			          "`scale` integer default 0,"+
			          "`txi` text default null,"+
			          "`type` text default null,"+ //default: Text
			          "`unique` text default null,"+ //default: N
			          "`cbi` text not null,"+
			          "`cat` text not null default current_timestamp,"+
			          "`mbi` text not null,"+
			          "`mat` text not null default current_timestamp);";			
			_this.dropTable(SjamayeeDb.ATTRIBUTES);
			_this.executeSql(sqlText);
		},
	  dropTable: function(tableName) {
		  //var _this = this;
	    this.webdb.db.transaction(function(tx) {
		 		tx.executeSql("DROP TABLE IF EXISTS `"+tableName+"`;", []);
				log("Table "+tableName+" dropped.");
	    });
	  },
	  executeSql: function(sqlText) {
			log("executeSql\nsqlText: "+sqlText);
		  var _this = this;
	    this.webdb.db.transaction(function(tx) {
		 		tx.executeSql(sqlText, [],
		 			_this.webdb.onSuccess,
					_this.webdb.onError);			
	    });
	  },
	  open: function(name,version,description,size) {
		  var _this = this;
			//this.webdb.db = null;
	    this.webdb.db = openDatabase(name,version,description,size);
	  },
	  add: function(id,text) {
			log("add");
		  var _this = this;
	    this.webdb.db.transaction(function(tx) {
	      //var id = new Date();
	      //tx.executeSql('INSERT INTO todo(todo, added_on) VALUES (?,?)', [text, id],
	      //tx.executeSql('INSERT INTO todo(id, added_on) VALUES (?,?)', [id, text],
	      tx.executeSql("INSERT INTO `todo`(`id`, `value`) VALUES (?,?);", [id,text],
	      	_this.webdb.onSuccess,
	        _this.webdb.onError);
			  //log("add / "+text);
	    });
	  },
	  getAll: function(tableName) {
			log("getAll");
		  var _this = this;
	    this.webdb.db.transaction(function(tx) {
	      tx.executeSql("SELECT * FROM `" + tableName + "`;", [],
	 			null, //_this.webdb.onSuccess,
				_this.webdb.onError);
	    });
	  }
	});
	SjamayeeDb.ID = "SjamayeeDb";
	SjamayeeDb.SEQUENCES = "sequences";
	SjamayeeDb.TYPES = "types";
	SjamayeeDb.TEXTS = "texts";
	SjamayeeDb.OBJECTS = "objects";
	SjamayeeDb.REFERENCES = "references";
	SjamayeeDb.ATTRIBUTES = "attributes";

  var dbSize = 5 * 1024 * 1024; // 5MB	
	var sdb = new SjamayeeDb('Todo', '1.0', 'Todo manager', dbSize);
	sdb.dropTable("todo");
	var sqlText = "create table if not exists `todo`(`id` integer primary key not null, value text not null);";  
	sdb.executeSql(sqlText);

	sdb.executeSql("delete from `"+SjamayeeDb.TYPES+"`;");
	var i = 0;
	while (i < 500) {
    sdb.webdb.db.transaction(function(tx) {
			var sqlText = "insert into `"+SjamayeeDb.TYPES+"` values(?,?,?,?,?,?,?,?,?,?,?,?,?);";
			var ta = [String(i),0,'t'+i,'c'+i,'n'+i,'d'+i,'Y','object','txi','cbi','2011-01-01 12:01:01','mbi','2011-01-01 12:02:02'];
      tx.executeSql(sqlText, ta,
      	sdb.webdb.onSuccess,
        sdb.webdb.onError);
    });
		i++;
	};
	sdb.getAll(SjamayeeDb.TYPES);
	
	function loadTodoItems(tx, rs) {
	  var rowOutput = "";
	  for (var i = 0; i < rs.rows.length; i++) {
		  if (i == 1 || i == 100 || i == 1000 || i == 2000 || i == 3000 || i == 4000) {
	    	rowOutput += renderTodo(rs.rows.item(i));
			}
	  }
	  var todoItems = document.getElementById('todoItems');
	  todoItems.innerHTML = rowOutput;
	}	
	function renderTodo(row) {
	  return '<li>' + row.ID + '</li>';
	}
	
  function log(txt) {
    //if (logging) {
      console.log(txt);
    //}
  };
  </script>	
  <!-- script type="text/javascript" src="indexeddb.js"></script -->
  <!-- script type="application/javascript" src="indexeddb.js"></script -->
 </head>
 <body>
  <header>
	 <aside>
		<form method="post" action="/">
			<input type="search" id="search-text" placeholder="Keywords..."/>
			<input type="submit" id="search-submit" value="Find"/>
		</form>
	 </aside>
	 <hgroup>
		<h1>WordPress Blog</h1>
		<h2>Just another WordPress Blog</h2>
	 </hgroup>
 	 <nav class="bar">
		<ul>
			<li><a href="#">Home</a></li>
			<li><a href="#">About</a></li>
			<li><a href="#">Archive</a></li>
			<li><a href="#">Links</a></li>
			<li><a href="#">Contact</a></li>
		</ul>
	 </nav>
  </header>
  <aside>
	 <details>
		<summary>Categories</summary>
		<ul>
		 <li>
		  <a href="#">Code</a>
			<ul>
			 <li><a href="#">AppleScript</a></li>
			 <li><a href="#">CSS</a></li>
			 <li><a href="#">jQuery</a></li>
			 <li><a href="#">PHP</a></li>
			 <li><a href="#">XHTML</a></li>
			</ul>
		 </li>
		 <li>
		  <a href="#">Design</a>
		  <ul>
		 	 <li><a href="#">Themes</a></li>
			</ul>
		 </li>
		 <li><a href="#">Mac Stuff</a></li>
		 <li><a href="#">News</a></li>
		</ul>
	 </details>
  </aside>
  <section>
	 <article>
		<aside class="left">
		 <p>May 24<br/>2010</p>
		</aside>
		<hgroup>
		 <h3>A WordPress Post</h3>
		 <h4>Just another WordPress Post</h4>
		</hgroup>
		<section>
		 <p>Some Content... Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur mattis sollicitudin nunc, vitae molestie massa feugiat ac. In nec massa felis. Aliquam gravida lorem sit amet enim tempus rhoncus. Sed cursus tempor mi eget tempor. Vestibulum et tortor mi. Aliquam at velit sit amet neque cursus pretium. Fusce suscipit pharetra purus nec elementum. Nunc egestas hendrerit nulla, venenatis ullamcorper felis egestas vitae. Nulla facilisi. Etiam hendrerit justo sed lacus suscipit pellentesque. Nullam auctor lacus vitae mauris porttitor quis tincidunt nisl aliquet. Donec rhoncus faucibus dolor, eu sollicitudin ipsum ullamcorper aliquet. Vivamus molestie sagittis ligula. Mauris rutrum blandit lorem nec iaculis. Donec vitae tortor quis dolor rutrum dignissim.</p>
		 <blockquote>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</blockquote>
		 <aside><blockquote>Morbi laoreet suscipit ligula eget cursus. Sed nec tellus eu lacus tempor tincidunt. Donec non consequat ligula.</blockquote></aside>
		 <p>Nullam quis risus purus. Cras dictum orci id velit tincidunt in vehicula ligula tristique. Curabitur volutpat tristique odio, sit amet vulputate mi scelerisque a. Morbi laoreet suscipit ligula eget cursus. Sed nec tellus eu lacus tempor tincidunt. Donec non consequat ligula. Aliquam erat volutpat. Curabitur nec hendrerit mi. Fusce nec ante luctus massa gravida ultrices eu a ligula. Maecenas vitae lorem nisl. Nunc quam mi, dapibus ut pretium in, adipiscing in lorem. Mauris sed velit ligula, vitae blandit est. Etiam sed velit ut lacus viverra rutrum at in enim. Donec condimentum imperdiet nunc vel volutpat. Maecenas tincidunt vulputate rutrum.</p>
		 <aside><figure><img src="figure.png" alt="html5/default.css" /><figcaption><p>html5/default.css</p></figcaption></figure></aside>
		 <p>Mauris fringilla blandit orci, nec facilisis orci scelerisque quis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Morbi dui elit, gravida eu porta scelerisque, sodales vel lorem. Maecenas nisi elit, varius id varius nec, congue eget ipsum. Donec a est vel quam scelerisque vehicula in pellentesque diam. Nulla porta viverra nibh, sed eleifend nisl fringilla a. Vestibulum sollicitudin faucibus arcu quis viverra. Morbi vitae eros vel eros ullamcorper congue sed at turpis. Etiam cursus mi non quam aliquam egestas. Aliquam et tempor odio. Morbi lobortis tincidunt tellus, id ultricies elit hendrerit quis. Nunc massa nibh, congue at suscipit sed, dictum eget metus. Cras in iaculis purus. In urna quam, malesuada vitae blandit et, fringilla a arcu. Donec vulputate purus lectus. Fusce varius sapien non justo bibendum ut luctus risus accumsan. Sed quis dictum nulla. Donec euismod bibendum cursus. Praesent ac velit quis tortor tristique posuere semper ac nulla.</p>
		</section>
	 </article>
  </section>
  <footer>
	 <p>Copyright &copy; 2010 Michael Hurley | STUDIOTWELVE</p>
  </footer>
 </body>
</html>